/* =========================
   PACKAGES (preview wheel)
   ========================= */

html[data-brand="spa"] .spa-packages {
    padding: 90px 0 110px;
    position: relative;
}

html[data-brand="spa"] .spa-packages::before {
    content: "";
    position: absolute;
    inset: -140px -120px auto -120px;
    height: 360px;
    background:
        radial-gradient(900px 520px at 20% 20%, rgba(214, 163, 107, .14), transparent 62%),
        radial-gradient(900px 520px at 85% 10%, rgba(214, 163, 107, .08), transparent 60%);
    pointer-events: none;
}

/* Shell (no frame) */
html[data-brand="spa"] .pkg-wheel-shell {
    position: relative;
    border: 0;
    background: transparent;
    box-shadow: none;
    padding: 0;
    overflow: visible;
}

/* Stage (wheel mode) */
html[data-brand="spa"] .pkg-wheel {
    position: relative;
    height: 420px;
    touch-action: pan-y;
}

/* Card base (wheel mode) */
html[data-brand="spa"] .pkg-card {
    position: absolute;
    top: 0;
    left: 50%;
    width: min(520px, 92vw);
    height: 100%;
    transform: translateX(-50%);
    opacity: 1;
    pointer-events: none;

    border-radius: 22px;
    overflow: hidden;
    border: 1px solid rgba(0, 0, 0, .06);

    background:
        radial-gradient(1200px 700px at 20% 0%, rgba(214, 163, 107, .14), transparent 55%),
        #fff;

    box-shadow: 0 18px 55px rgba(0, 0, 0, .12);
    color: rgba(0, 0, 0, .86);
    padding: 22px;

    transition:
        transform 520ms cubic-bezier(.2, .9, .2, 1),
        filter 520ms cubic-bezier(.2, .9, .2, 1);
}

/* Dim overlay (not opacity on the whole card) */
html[data-brand="spa"] .pkg-card::after {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, .22);
    opacity: 0;
    pointer-events: none;
    transition: opacity 420ms ease;
}

/* Default 3-up */
html[data-brand="spa"] .pkg-card.is-center {
    pointer-events: auto;
    transform: translateX(-50%) scale(1);
    filter: none;
    z-index: 3;
}

html[data-brand="spa"] .pkg-card.is-left {
    pointer-events: auto;
    transform: translateX(calc(-50% - 360px)) scale(.95);
    filter: blur(.7px) saturate(.92) contrast(.97) brightness(.98);
    z-index: 2;
}

html[data-brand="spa"] .pkg-card.is-left::after {
    opacity: 1;
}

html[data-brand="spa"] .pkg-card.is-right {
    pointer-events: auto;
    transform: translateX(calc(-50% + 360px)) scale(.95);
    filter: blur(.7px) saturate(.92) contrast(.97) brightness(.98);
    z-index: 2;
}

html[data-brand="spa"] .pkg-card.is-right::after {
    opacity: 1;
}

/* Far cards OFF by default */
html[data-brand="spa"] .pkg-card.is-far-left,
html[data-brand="spa"] .pkg-card.is-far-right {
    opacity: 0;
    pointer-events: none;
    transform: translateX(-50%) scale(.98);
    filter: none;
    z-index: 1;
}

/* Everything else hidden */
html[data-brand="spa"] .pkg-card.is-off {
    opacity: 0;
    pointer-events: none;
}

/* Card internals */
html[data-brand="spa"] .pkg-card-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 10px;
}

html[data-brand="spa"] .pkg-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border-radius: 999px;
    background: rgba(214, 163, 107, .18);
    border: 1px solid rgba(214, 163, 107, .22);
    font-weight: 750;
    font-size: .85rem;
    color: rgba(0, 0, 0, .76);
}

html[data-brand="spa"] .pkg-price {
    font-size: .9rem;
    font-weight: 750;
    color: rgba(0, 0, 0, .62);
}

html[data-brand="spa"] .pkg-title {
    margin: 6px 0 8px;
    font-size: 1.45rem;
    letter-spacing: -.02em;
}

html[data-brand="spa"] .pkg-desc {
    margin: 0 0 14px;
    color: rgba(0, 0, 0, .62);
    line-height: 1.65;
    max-width: 70ch;
}

html[data-brand="spa"] .pkg-list {
    margin: 0 0 18px;
    padding-left: 18px;
    color: rgba(0, 0, 0, .64);
    line-height: 1.6;
}

html[data-brand="spa"] .pkg-actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: auto;
}

/* NAV BUTTONS (base styles) */
html[data-brand="spa"] .pkg-nav {
    width: 44px;
    height: 44px;
    border-radius: 12px;

    border: 1px solid rgba(0, 0, 0, .10);
    background: rgba(255, 255, 255, .70);
    color: rgba(0, 0, 0, .72);
    font-weight: 900;
    cursor: pointer;

    backdrop-filter: blur(14px);
    transition: transform .18s ease, background .18s ease, border-color .18s ease;
}

html[data-brand="spa"] .pkg-nav:hover {
    transform: translateY(-2px);
    background: rgba(214, 163, 107, .20);
    border-color: rgba(214, 163, 107, .26);
}

/* Overlay arrows (desktop/tablet) */
html[data-brand="spa"] .pkg-nav--overlay {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 20;
}

html[data-brand="spa"] .pkg-nav--overlay.pkg-prev {
    left: 14px;
}

html[data-brand="spa"] .pkg-nav--overlay.pkg-next {
    right: 14px;
}

/* Footer under the wheel (desktop) */
html[data-brand="spa"] .pkg-footer {
    margin-top: 18px;
    display: flex;
    justify-content: flex-start;
}

/* Controls under the wheel */
html[data-brand="spa"] .wheel-controls {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    /* left on non-mobile */
    gap: 12px;
    margin-top: 16px;
}

/* Hide row arrows by default (non-mobile only shows button) */
html[data-brand="spa"] .wheel-controls .pkg-nav--row {
    display: none;
}

/* Non-mobile button sizing */
html[data-brand="spa"] .wheel-controls .btn {
    width: auto;
    min-width: 220px;
    text-align: center;
}

/* ULTRA-WIDE */
@media (min-width: 2150px) {
    html[data-brand="spa"] .pkg-card.is-center {
        filter: none;
    }

    html[data-brand="spa"] .pkg-card.is-center::after {
        opacity: 0;
    }

    html[data-brand="spa"] .pkg-card.is-left {
        transform: translateX(calc(-50% - 560px)) scale(.98);
        filter: none;
    }

    html[data-brand="spa"] .pkg-card.is-left::after {
        opacity: 0;
    }

    html[data-brand="spa"] .pkg-card.is-right {
        transform: translateX(calc(-50% + 560px)) scale(.98);
        filter: none;
    }

    html[data-brand="spa"] .pkg-card.is-right::after {
        opacity: 0;
    }

    html[data-brand="spa"] .pkg-card.is-far-left,
    html[data-brand="spa"] .pkg-card.is-far-right {
        opacity: .28;
        pointer-events: auto;
        z-index: 1;
        filter: blur(1.35px) saturate(.88) contrast(.95) brightness(.97);
    }

    html[data-brand="spa"] .pkg-card.is-far-left {
        transform: translateX(calc(-50% - 840px)) scale(.92);
    }

    html[data-brand="spa"] .pkg-card.is-far-right {
        transform: translateX(calc(-50% + 840px)) scale(.92);
    }
}

/* MID */
@media (max-width: 1280px) {
    html[data-brand="spa"] .pkg-card.is-left {
        transform: translateX(calc(-50% - 320px)) scale(.955);
    }

    html[data-brand="spa"] .pkg-card.is-right {
        transform: translateX(calc(-50% + 320px)) scale(.955);
    }
}

/* TABLET / SMALL DESKTOP */
@media (max-width: 1050px) {
    html[data-brand="spa"] .pkg-wheel {
        height: 400px;
    }

    html[data-brand="spa"] .pkg-card {
        width: min(440px, 86vw);
        padding: 18px;
        border-radius: 20px;
    }

    html[data-brand="spa"] .pkg-card.is-left {
        opacity: .55;
        transform: translateX(calc(-50% - 255px)) scale(.94);
    }

    html[data-brand="spa"] .pkg-card.is-right {
        opacity: .55;
        transform: translateX(calc(-50% + 255px)) scale(.94);
    }

    html[data-brand="spa"] .pkg-title {
        font-size: 1.25rem;
    }

    html[data-brand="spa"] .pkg-desc {
        font-size: .95rem;
    }

    html[data-brand="spa"] .pkg-list {
        font-size: .95rem;
    }

    html[data-brand="spa"] .pkg-nav--overlay.pkg-prev {
        left: 10px;
    }

    html[data-brand="spa"] .pkg-nav--overlay.pkg-next {
        right: 10px;
    }
}

/* MOBILE: keep 400px wheel, keep card transforms,
   BUT pin the controls to bottom of the shell and reserve space */
@media (max-width: 900px) {

    html[data-brand="spa"] .spa-packages {
        padding: 70px 0 0px;
    }

    /* keep your 400px breathing room */
    html[data-brand="spa"] .pkg-wheel {
        height: 450px;
        touch-action: pan-y;
    }

    /* cards unchanged; just ensure scaling origin */
    html[data-brand="spa"] .pkg-card {
        transform-origin: top center;
        width: min(300px, 60vw);
        padding: 16px 16px 18px;
        border-radius: 20px;
    }

    html[data-brand="spa"] .pkg-card.is-center {
        transform: translateX(-50%) scale(.8);
    }

    html[data-brand="spa"] .pkg-card.is-left {
        transform: translateX(calc(-50% - 165px)) scale(.75);
    }

    html[data-brand="spa"] .pkg-card.is-right {
        transform: translateX(calc(-50% + 165px)) scale(.75);
    }

    /* hide overlay arrows */
    html[data-brand="spa"] .pkg-nav--overlay {
        display: none;
    }

    /* ✅ KEY FIX:
     Reserve space inside the shell and absolutely place controls at the bottom.
     This makes the controls sit "right under the cards" visually,
     and stops the "random gap" caused by the wheel's fixed height. */
    html[data-brand="spa"] .pkg-wheel-shell {
        --controls-h: 56px;
        /* height area for arrows/button row */
        --controls-gap: 16px;
        /* same spacing feel as desktop */
        padding-bottom: calc(var(--controls-h) + var(--controls-gap));
    }

    html[data-brand="spa"] .wheel-controls {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;

        margin-top: 0;
        /* don't use flow spacing on mobile */
        justify-content: space-between;
        gap: 10px;
    }

    html[data-brand="spa"] .wheel-controls .pkg-nav--row {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex: 0 0 44px;
        transform: none;
    }

    html[data-brand="spa"] .wheel-controls .btn {
        flex: 1;
        width: auto;
        min-width: 0;
        text-align: center;
    }
}

/* =========================================
   PACKAGES — prevent horizontal scroll
   + very subtle edge soften (almost hard cut)
   ========================================= */

html[data-brand="spa"] .spa-packages {
    overflow-x: clip;
}

@supports not (overflow: clip) {
    .spa-packages {
        overflow-x: hidden;
    }
}

html[data-brand="spa"] .pkg-wheel-shell {
    position: relative;
    overflow-x: clip;
}

@supports not (overflow: clip) {
    .pkg-wheel-shell {
        overflow-x: hidden;
    }
}

/* subtle edge soften */
html[data-brand="spa"] .pkg-wheel-shell::before,
html[data-brand="spa"] .pkg-wheel-shell::after {
    content: "";
    position: absolute;
    top: -40px;
    bottom: -40px;
    width: clamp(10px, 3vw, 32px);
    z-index: 12;
    pointer-events: none;

    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    background: rgba(255, 255, 255, 0.001);
}

html[data-brand="spa"] .pkg-wheel-shell::before {
    left: 0;
    -webkit-mask-image: linear-gradient(to right, #000 0%, #000 30%, transparent 100%);
    mask-image: linear-gradient(to right, #000 0%, #000 30%, transparent 100%);
}

html[data-brand="spa"] .pkg-wheel-shell::after {
    right: 0;
    -webkit-mask-image: linear-gradient(to left, #000 0%, #000 30%, transparent 100%);
    mask-image: linear-gradient(to left, #000 0%, #000 30%, transparent 100%);
}