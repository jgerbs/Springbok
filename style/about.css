/* =========================================================
   Mission Slider — SINGLE SLIDE + TIMER + ARROWS
   Corner text (no dark panel) + stagger reveal
   FIXED:
   - BL/BR positioning no longer overrides TL/TR
   - mobile BL/BR rule no longer forces TL/TR to bottom
   - bullets truly right-align on TR (dot on right)
   ========================================================= */

.mission-v2 {
    position: relative;
    padding: clamp(78px, 7vw, 120px) 0;
    overflow: hidden;
}

.mission-v2::before {
    content: "";
    position: absolute;
    inset: -140px -140px auto -140px;
    height: 520px;
    background:
        radial-gradient(900px 520px at 18% 30%, rgba(18, 192, 138, .14), transparent 60%),
        radial-gradient(800px 520px at 80% 10%, rgba(197, 138, 99, .10), transparent 62%);
    pointer-events: none;
}

.mission-v2-shell {
    position: relative;
    width: 100%;
    height: clamp(420px, 52vw, 620px);
    border-radius: var(--radius-xl);
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, .12);
    background: linear-gradient(180deg, rgba(255, 255, 255, .04), rgba(255, 255, 255, .02));
    box-shadow: var(--shadow-soft);
    isolation: isolate;
}

/* =========================================================
   Mission slider — prevent ultra-wide "rectangle" distortion
   ========================================================= */

.mission-v2-shell {
    max-width: 1600px;
    margin: 0 auto;
}

@supports (aspect-ratio: 1 / 1) {
    .mission-v2-shell {
        height: auto;
        aspect-ratio: 16 / 9;
        min-height: 420px;
        max-height: 620px;
    }
}

@media (min-width: 1400px) {
    @supports (aspect-ratio: 1 / 1) {
        .mission-v2-shell {
            aspect-ratio: 21 / 9;
            max-height: 640px;
        }
    }
}

.mission-slider {
    position: relative;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    list-style: none;
}

.mission-item {
    position: absolute;
    inset: 0;
    opacity: 0;
    pointer-events: none;

    background-position: center;
    background-size: cover;

    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    will-change: opacity;
    transition: opacity .55s ease;
}

.mission-item.is-active {
    opacity: 1;
    pointer-events: auto;
}

/* readability overlay only on active slide */
.mission-item::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity .55s ease;
}

.mission-item.is-active::after {
    opacity: 1;
    background:
        linear-gradient(90deg,
            rgba(0, 0, 0, .74) 0%,
            rgba(0, 0, 0, .46) 40%,
            rgba(0, 0, 0, .18) 70%,
            rgba(0, 0, 0, .06) 100%),
        linear-gradient(180deg,
            rgba(0, 0, 0, .06) 0%,
            rgba(0, 0, 0, .44) 100%);
}

/* =========================================================
   Corner overlay text (NO panel) + stagger reveal
   NOTE: this is "base styling" only — positioning is handled
         by BL/BR/TL/TR blocks below (no global bottom/top)
   ========================================================= */

.mission-content {
    position: absolute;
    z-index: 3;

    width: min(44vw, 560px);
    max-width: 560px;

    padding: 0;
    background: none;
    border: 0;
    border-radius: 0;
    box-shadow: none;
    backdrop-filter: none;

    color: rgba(255, 255, 255, .96);
    text-shadow: 0 10px 26px rgba(0, 0, 0, .70);

    opacity: 0;
    pointer-events: none;
}

.mission-item.is-active .mission-content {
    opacity: 1;
    pointer-events: auto;
}

/* Title pops first */
.mission-title {
    margin: 0 0 10px;
    font-size: clamp(1.8rem, 3.2vw, 2.6rem);
    line-height: 1.05;
    letter-spacing: -.02em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, .98);

    opacity: 0;
    transform: translateY(10px);
}

/* Desc + button come in after a short delay */
.mission-desc,
.mission-content .btn {
    opacity: 0;
    transform: translateY(10px);
}

.mission-item.is-active .mission-title {
    animation: missionTitleIn .45s cubic-bezier(.2, .8, .2, 1) .05s forwards;
}

.mission-item.is-active .mission-desc {
    animation: missionBodyIn .65s ease .55s forwards;
}

.mission-item.is-active .mission-content .btn {
    animation: missionBodyIn .65s ease .70s forwards;
}

.mission-desc {
    margin: 0 0 14px;
    line-height: 1.65;
    font-size: 1.02rem;
    color: rgba(255, 255, 255, .86);
    max-width: 56ch;
}

.mission-content .btn {
    border-color: rgba(255, 255, 255, .34);
    background: rgba(255, 255, 255, .10);
    box-shadow: 0 14px 34px rgba(0, 0, 0, .35);
}

.mission-content .btn:hover {
    border-color: rgba(18, 192, 138, .70);
    background: rgba(18, 192, 138, .16);
}

@keyframes missionTitleIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes missionBodyIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* =========================================================
   Mission text positions — BL / BR (used on other page)
   IMPORTANT: no global ".mission-content { bottom... }"
   ========================================================= */

/* BL = bottom-left */
.mission-item[data-pos="bl"] .mission-content {
    bottom: clamp(70px, 6vw, 96px);
    top: auto;
    left: clamp(18px, 3.2vw, 40px);
    right: auto;
    text-align: left;
}

/* BR = bottom-right */
.mission-item[data-pos="br"] .mission-content {
    bottom: clamp(70px, 6vw, 96px);
    top: auto;
    left: auto;
    right: clamp(18px, 3.2vw, 40px);
    text-align: right;
}

/* button alignment */
.mission-item[data-pos="br"] .mission-content .btn {
    margin-left: auto;
}

.mission-item[data-pos="bl"] .mission-content .btn {
    margin-right: auto;
}

/* text block alignment */
.mission-item[data-pos="br"] .mission-desc {
    margin-left: auto;
}

.mission-item[data-pos="bl"] .mission-desc {
    margin-right: auto;
}

/* =========================================================
   Mission text positions — TL / TR (About page)
   ========================================================= */

/* TL = top-left */
.mission-item[data-pos="tl"] .mission-content {
    top: clamp(18px, 3.2vw, 34px);
    bottom: auto;
    left: clamp(18px, 3.2vw, 40px);
    right: auto;
    text-align: left;
}

/* TR = top-right */
.mission-item[data-pos="tr"] .mission-content {
    top: clamp(18px, 3.2vw, 34px);
    bottom: auto;
    left: auto;
    right: clamp(18px, 3.2vw, 40px);
    text-align: right;
}

/* keep paragraph + list block aligned with the corner */
.mission-item[data-pos="tr"] .mission-desc,
.mission-item[data-pos="tr"] .mission-bullets {
    margin-left: auto;
}

.mission-item[data-pos="tl"] .mission-desc,
.mission-item[data-pos="tl"] .mission-bullets {
    margin-right: auto;
}

/* =========================================================
   Controls row (arrows + timer)
   ========================================================= */

.mission-controls {
    position: absolute;
    bottom: 18px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 7;

    display: flex;
    align-items: center;
    gap: 12px;

    width: min(860px, calc(100% - 28px));
}

.mission-nav-btn {
    flex: 0 0 auto;
    width: 46px;
    height: 46px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, .18);
    background: rgba(255, 255, 255, .10);
    color: rgba(255, 255, 255, .92);
    font-size: 28px;
    line-height: 1;
    display: grid;
    place-items: center;
    cursor: pointer;
    backdrop-filter: blur(10px);
    transition: transform .15s ease, background .15s ease, border-color .15s ease;
}

.mission-nav-btn:hover {
    transform: translateY(-1px);
    background: rgba(18, 192, 138, .14);
    border-color: rgba(18, 192, 138, .55);
}

.mission-nav-btn:active {
    transform: translateY(0);
}

.mission-timer {
    flex: 1 1 auto;
    min-width: 96px;
    max-width: 620px;
    height: 6px;

    border-radius: 999px;
    background: rgba(255, 255, 255, .10);
    border: 1px solid rgba(255, 255, 255, .14);
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.mission-timer-bar {
    display: block;
    height: 100%;
    width: 0%;
    border-radius: 999px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
}

/* =========================================================
   Mobile sizing
   ========================================================= */

@media (max-width: 720px) {
    .mission-v2-shell {
        height: clamp(360px, 72vw, 460px);
        border-radius: var(--radius-lg);
    }

    .mission-title {
        font-size: clamp(1.35rem, 6vw, 1.85rem);
        margin-bottom: 8px;
    }

    .mission-desc {
        font-size: .95rem;
        line-height: 1.55;
        margin-bottom: 12px;
    }

    .mission-content .btn {
        width: auto;
        justify-content: center;
    }

    .mission-controls {
        gap: 10px;
        width: calc(100% - 28px);
    }

    .mission-nav-btn {
        width: 42px;
        height: 42px;
        font-size: 26px;
    }

    .mission-timer {
        height: 5px;
        min-width: 84px;
    }
}

/* =========================================================
   Mobile positioning
   - BL/BR: bottom-left (like your original)
   - TL/TR: top-left (so About stays top and readable)
   ========================================================= */

@media (max-width: 720px) {

    /* BL/BR pages: keep bottom-left */
    .mission-item[data-pos="bl"] .mission-content,
    .mission-item[data-pos="br"] .mission-content {
        left: 14px !important;
        right: auto !important;
        bottom: 78px !important;
        top: auto !important;
        text-align: left !important;
    }

    .mission-item[data-pos="bl"] .mission-content .btn,
    .mission-item[data-pos="br"] .mission-content .btn {
        margin-left: 0 !important;
    }

    /* TL/TR pages: force top-left on mobile */
    .mission-item[data-pos="tl"] .mission-content,
    .mission-item[data-pos="tr"] .mission-content {
        top: 14px !important;
        bottom: auto !important;
        left: 14px !important;
        right: auto !important;
        text-align: left !important;
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {

    .mission-item,
    .mission-item::after {
        transition: none;
    }

    .mission-title,
    .mission-desc,
    .mission-content .btn {
        animation: none !important;
        opacity: 1 !important;
        transform: none !important;
    }
}

/* =========================================================
   Mission storytelling bullets
   ========================================================= */

.mission-bullets {
    margin: 6px 0 0;
    padding: 0;
    list-style: none;
    display: grid;
    gap: 8px;
    max-width: 56ch;

    opacity: 0;
    transform: translateY(10px);
}

.mission-bullets li {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    font-size: .98rem;
    line-height: 1.5;
    color: rgba(255, 255, 255, .84);
}

.mission-bullets li::before {
    content: "";
    width: 7px;
    height: 7px;
    border-radius: 999px;
    background: var(--accent);
    margin-top: .45em;
    flex: 0 0 7px;
    box-shadow: 0 0 0 3px rgba(18, 192, 138, .14);
}

/* animate bullets in sequence */
.mission-item.is-active .mission-bullets {
    animation: missionBodyIn .65s ease .75s forwards;
}

/* =========================================================
   Bullets — RIGHT aligned slides (TR + BR)
   Put the dot on the RIGHT, keep everything truly right-aligned
   ========================================================= */

.mission-item[data-pos="tr"] .mission-bullets,
.mission-item[data-pos="br"] .mission-bullets {
    margin-left: auto;
    /* push whole list block to the right */
    text-align: right;
    justify-items: end;
    /* grid children align to the right */
}

.mission-item[data-pos="tr"] .mission-bullets li,
.mission-item[data-pos="br"] .mission-bullets li {
    justify-content: flex-end;
    flex-direction: row-reverse;
    /* dot goes to the right */
    text-align: right;
}

/* spacing between text and the dot (now on the right) */
.mission-item[data-pos="tr"] .mission-bullets li::before,
.mission-item[data-pos="br"] .mission-bullets li::before {
    margin-left: 10px;
    /* space between text and dot */
    margin-right: 0;
}

/* =========================================================
   MOBILE @720 (DROP-IN): blurred image behind text + controls
   - Uses the ACTIVE LI's background-image (no HTML change)
   - No top image zone
   - Shell becomes grid: [content] [controls] (no overlap)
   - No seam: controls sit on same overlay continuation
   - Bullets: TL/BL left, TR/BR right (dot on right)
   ========================================================= */
@media (max-width: 720px) {

    /* 0) Card becomes 2 rows */
    .mission-v2-shell {
        display: grid !important;
        grid-template-rows: 1fr auto;
        height: auto !important;
        min-height: 0 !important;
        aspect-ratio: auto !important;
        overflow: hidden;
        position: relative;
        isolation: isolate;
        /* keeps bg layers contained */
    }

    .mission-slider {
        grid-row: 1;
        height: auto !important;
        min-height: 0;
        position: relative;
        z-index: 2;
        padding: 0 !important;
        margin: 0 !important;
    }

    /* 1) Only active slide participates in layout */
    .mission-item {
        position: relative !important;
        inset: auto !important;
        display: none !important;
        opacity: 1 !important;
        pointer-events: none !important;
    }

    .mission-item.is-active {
        display: block !important;
        pointer-events: auto !important;
    }

    /* 2) Kill the "top image zone" idea completely */
    .mission-item::before {
        content: none !important;
    }

    /* 3) Create ONE continuous blurred background + dark overlay
        using the ACTIVE slide itself (so we can read its bg-image) */
    .mission-item.is-active {
        /* keep the original image on the LI so ::before can clone it */
        background-position: var(--bg-pos-m, 50% 35%);
        background-size: cover;
    }

    /* blurred image layer */
    .mission-item.is-active::before {
        content: "" !important;
        position: absolute;
        inset: 0;
        z-index: 0;

        /* IMPORTANT: copy the background-image reliably */
        background-image: inherit;
        background-size: inherit;
        background-position: inherit;
        background-repeat: no-repeat;

        filter: blur(16px) saturate(1.12) contrast(1.03);
        transform: scale(1.10);
        opacity: .92;
    }

    /* dark overlay layer (this is what makes it blend to dark bottom) */
    .mission-item.is-active::after {
        content: "" !important;
        position: absolute;
        inset: 0;
        z-index: 1;
        opacity: 1 !important;

        background:
            radial-gradient(120% 80% at 50% 10%, rgba(255, 255, 255, .06), transparent 60%),
            linear-gradient(180deg,
                rgba(0, 0, 0, .40) 0%,
                rgba(0, 0, 0, .78) 58%,
                rgba(0, 0, 0, 1) 100%);
    }

    /* 4) Content becomes normal flow, sits above overlay */
    .mission-content {
        position: relative !important;
        z-index: 2 !important;

        width: auto !important;
        max-width: none !important;

        left: auto !important;
        right: auto !important;
        top: auto !important;
        bottom: auto !important;

        padding: 18px 16px 18px !important;
        margin: 0 !important;

        background: transparent !important;
        border: 0 !important;
        text-shadow: none !important;
        text-align: left !important;
    }

    .mission-title {
        text-align: center !important;
        margin: 0 0 10px !important;
        font-size: clamp(1.25rem, 6.2vw, 1.65rem) !important;
        line-height: 1.08 !important;
    }

    .mission-desc {
        margin: 0 0 12px !important;
        font-size: .95rem !important;
        line-height: 1.55 !important;
        max-width: none !important;
    }

    /* 5) Controls are their own row (never overlay text) */
    .mission-controls {
        grid-row: 2;
        position: relative !important;
        z-index: 3 !important;

        left: auto !important;
        bottom: auto !important;
        transform: none !important;

        width: calc(100% - 28px) !important;
        margin: 10px auto 14px !important;

        /* IMPORTANT: keep controls on same "darkened" vibe without seams */
        padding: 12px 12px 14px !important;
        border-radius: 16px;
        background: rgba(0, 0, 0, .40) !important;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, .10);
    }

    .mission-timer {
        max-width: none !important;
        flex: 1 1 auto !important;
    }

    /* 6) BULLETS: HARD RESET so nothing "stays right" accidentally */
    .mission-bullets {
        margin: 0 !important;
        padding: 0 !important;
        max-width: none !important;
        gap: 8px !important;

        text-align: left !important;
        justify-items: start !important;
    }

    .mission-bullets li {
        flex-direction: row !important;
        /* dot LEFT */
        justify-content: flex-start !important;
        text-align: left !important;
    }

    .mission-bullets li::before {
        margin-left: 0 !important;
        margin-right: 0 !important;
    }

    /* hard-kill any right-align behavior from desktop rules */
    .mission-item[data-pos="tr"] .mission-bullets,
    .mission-item[data-pos="br"] .mission-bullets {
        margin-left: 0 !important;
        justify-items: start !important;
        text-align: left !important;
    }

    .mission-item[data-pos="tr"] .mission-bullets li,
    .mission-item[data-pos="br"] .mission-bullets li {
        flex-direction: row !important;
        justify-content: flex-start !important;
        text-align: left !important;
    }

    .mission-item[data-pos="tr"] .mission-bullets li::before,
    .mission-item[data-pos="br"] .mission-bullets li::before {
        margin-left: 0 !important;
        margin-right: 0 !important;
    }

    /* 7) Kill ALL old corner positioning on mobile */
    .mission-item[data-pos="bl"] .mission-content,
    .mission-item[data-pos="br"] .mission-content,
    .mission-item[data-pos="tl"] .mission-content,
    .mission-item[data-pos="tr"] .mission-content {
        left: auto !important;
        right: auto !important;
        top: auto !important;
        bottom: auto !important;
    }

    /* 8) Slight sizing for very small devices so controls always fit */
    .mission-nav-btn {
        width: 42px !important;
        height: 42px !important;
        font-size: 26px !important;
    }

    .mission-timer {
        height: 5px !important;
        min-width: 84px !important;
    }
}


/* =========================================================
   WHY CHOOSE US — Responsive bubble grid (simple + scalable)
   Small: 1 column
   Medium: 2 columns (col 2 offset)
   Large: 3 columns (col 2 offset; col 1 + 3 aligned)
   + Large: pull row-2 edge bubbles up into gaps (4th + 6th)
   ========================================================= */

html[data-brand="clinic"] .why-bubbles {
    position: relative;
    padding: clamp(78px, 7vw, 120px) 0;
    overflow: hidden;
}

/* subtle premium glow */
html[data-brand="clinic"] .why-bubbles::before {
    content: "";
    position: absolute;
    inset: -140px -140px auto -140px;
    height: 520px;
    background:
        radial-gradient(900px 520px at 18% 30%, rgba(89, 168, 120, .14), transparent 60%),
        radial-gradient(800px 520px at 80% 10%, rgba(89, 168, 120, .10), transparent 62%);
    pointer-events: none;
}

html[data-brand="clinic"] .why-thread {
    margin-top: 18px;
    position: relative;

    display: grid;
    grid-template-columns: 1fr;
    /* SMALL default */
    gap: 14px;
    align-items: start;
}

/* wrappers */
html[data-brand="clinic"] .why-row {
    display: block;
    margin-top: 0;
    /* baseline */
}

/* Bubble base */
html[data-brand="clinic"] .why-bubble {
    width: 100%;
    border: 1px solid rgba(255, 255, 255, .12);
    background: linear-gradient(180deg, rgba(255, 255, 255, .07), rgba(255, 255, 255, .03));
    border-radius: 18px;
    /* small = clean card */
    padding: 16px 16px 14px;

    backdrop-filter: blur(10px);
    box-shadow: 0 18px 50px rgba(0, 0, 0, .28);

    position: relative;
    overflow: hidden;
}

html[data-brand="clinic"] .why-bubble::before {
    content: "";
    position: absolute;
    inset: -90px -90px auto -90px;
    height: 190px;
    background:
        radial-gradient(170px 120px at 18% 35%, rgba(89, 168, 120, .18), transparent 65%),
        radial-gradient(200px 140px at 82% 20%, rgba(255, 255, 255, .08), transparent 70%);
    pointer-events: none;
}

/* Text */
html[data-brand="clinic"] .why-badge {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

html[data-brand="clinic"] .why-dot {
    width: 10px;
    height: 10px;
    border-radius: 999px;
    background: rgba(89, 168, 120, .95);
    box-shadow: 0 0 0 4px rgba(89, 168, 120, .16);
}

html[data-brand="clinic"] .why-tag {
    font-size: .86rem;
    letter-spacing: .10em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, .82);
    font-weight: 700;
}

html[data-brand="clinic"] .why-title {
    margin: 0 0 6px;
    font-size: 1.12rem;
    letter-spacing: .01em;
}

html[data-brand="clinic"] .why-text {
    margin: 0;
    color: rgba(255, 255, 255, .78);
    line-height: 1.65;
}

/* CTA row */
html[data-brand="clinic"] .why-actions {
    margin-top: 22px;
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

/* =========================================================
   MEDIUM: 2 columns + 2nd column offset (as requested)
   ========================================================= */
@media (min-width: 820px) {
    html[data-brand="clinic"] .why-thread {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: clamp(14px, 2.2vw, 22px);
    }

    /* make bubbles feel more “bubble” on larger sizes */
    html[data-brand="clinic"] .why-bubble {
        border-radius: 28px;
        padding: 18px 18px 16px;
    }

    /* offset ONLY the second column (right column) */
    html[data-brand="clinic"] .why-thread>.why-row:nth-child(even) {
        margin-top: clamp(18px, 2.4vw, 40px);
    }
}

/* =========================================================
   LARGE: 3 columns
   - col 1 + col 3 aligned
   - col 2 offset down
   - pull row-2 edges (4th + 6th) up into the gaps
   ========================================================= */
@media (min-width: 1180px) {
    html[data-brand="clinic"] .why-thread {
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: clamp(16px, 2.2vw, 24px);
    }

    /* Reset the 2-col “even item” offset so it doesn’t mess up in 3-col */
    html[data-brand="clinic"] .why-thread>.why-row {
        margin-top: 0;
    }

    /* Offset ONLY items that land in column 2 (2nd item in each row of 3) */
    html[data-brand="clinic"] .why-thread>.why-row:nth-child(3n + 2) {
        margin-top: clamp(18px, 2.4vw, 40px);
    }

    /* NEW: pull the 4th and 6th bubbles upward (row 2 edges) */
    html[data-brand="clinic"] .why-thread>.why-row:nth-child(4),
    html[data-brand="clinic"] .why-thread>.why-row:nth-child(6) {
        margin-top: calc(clamp(18px, 2.4vw, 40px) * -0.55);
    }

    /* Slightly rounder on big screens */
    html[data-brand="clinic"] .why-bubble {
        border-radius: 34px;
    }
}

/* Extra-small phones */
@media (max-width: 420px) {
    html[data-brand="clinic"] .why-bubble {
        border-radius: 16px;
        padding: 14px 14px 12px;
    }
}